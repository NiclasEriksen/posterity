{% extends "base.html" %}
{% block title %}Pending videos{% endblock %}
{% block content %}
<section class="uk-section">
    <div class="uk-grid">
        <div class="uk-width-1-1 uk-text-center"><h2>Pending videos</h2></div>
    </div>
    <table class="uk-table uk-table-small uk-table-striped">
        <thead>
            <tr>
                <td class="uk-table-expand">Video</td>
                <td class="uk-table-shrink">Actions</td>
            </tr>
        </thead>
        <tbody>
            {% for v in pending_videos %}
            <tr>
                <td>
                    <div style="display: table-cell;">
                        <a href="/{{ v.video_id }}">{{ v.title }}</a><br>
                        <a href="{{ v.url }}" target="_blank">
                            {% if v.source_site_name|length %}
                            <span class="uk-icon-link" uk-icon="icon: {{ v.source_site_name }}; ratio: 0.75"></span>
                            {% endif %}
                            <span class="uk-text-small">{{ v.url[:128] }}</span>
                        </a>
                    </div>
                </td>
                <td>
                    {% if not v.ready_to_play and v.can_be_changed %}
                    <span uk-tooltip="title: Start archiving process" id="pending-{{v.video_id}}">
                    <a
                        class="uk-icon-button uk-text-success"
                        uk-icon="icon: cloud-download; ratio: 1.3"
                        onclick="startDownload('{{ v.video_id }}', btn_id='pending-{{v.video_id}}', remove_btn=true, redir=false)"
                    >
                    </a>
                    </span>
                    {% endif %}
                    {% if v.status == STATUS_COMPLETED and v.user_can_edit(current_user) and not v.post_processed %}
                    <span uk-tooltip="title: Post-process video" id="process-{{v.video_id}}">
                    <a
                        class="uk-icon-button {% if v.recommend_post_process %}uk-text-success recommended-action{% else %}uk-text-secondary{% endif %}"
                        uk-icon="icon: move; ratio: 1.3"
                        onclick="startProcessing('{{ v.video_id }}', btn_id='process-{{v.video_id}}', remove_btn=true, redir=false);"
                    >
                    </a>
                    </span>
                    {% endif %}
                    {% if v.pending_duplicates|length %}
                    <span uk-tooltip="title: Video has {{ v.duplicates|length }} possible duplicates;pos: top-left;">
                        <span class="uk-text-warning" uk-icon="icon: copy; ratio: 1.3"></span>
                    </span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</section>
<script src="{{ url_for('serve.static', filename='js/klippekort.js') }}"></script>
{% endblock %}